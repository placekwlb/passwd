<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generator Haseł</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #1c1c1c;
            color: white;
            padding: 20px;
            text-align: center; /* Wyśrodkowanie treści */
        }
        input, button, select {
            margin: 10px 0;
        }
        button {
            background-color: green;
            color: white;
            border: none;
            padding: 10px;
            cursor: pointer;
        }
        button:hover {
            background-color: darkgreen;
        }
        #location {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>Generator Haseł</h1>
    <label for="length">Długość hasła:</label>
    <select id="length">
        <option value="10">10</option>
        <option value="20">20</option>
        <option value="30">30</option>
    </select>
    <button onclick="generatePassword()">GENERUJ</button>
    <p id="result"></p>
    <input type="text" id="passwordField" readonly />

    <div id="location"></div>

    <script>
        function generatePassword() {
            const length = document.getElementById('length').value;
            const charset = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+";
            let password = "";
            for (let i = 0; i < length; i++) {
                const randomIndex = Math.floor(Math.random() * charset.length);
                password += charset[randomIndex];
            }
            displayPassword(password);
        }

        function displayPassword(password) {
            const passwordField = document.getElementById('passwordField');
            passwordField.value = ""; // Reset the password field
            let index = 0;

            const interval = setInterval(() => {
                if (index < password.length) {
                    passwordField.value += password[index];
                    index++;
                } else {
                    clearInterval(interval);
                }
            }, 500);
        }

        // Funkcja do uzyskania lokalizacji i temperatury
        async function fetchLocationAndWeather() {
            try {
                const res = await fetch('https://ipapi.co/json/');
                const data = await res.json();
                const locationDiv = document.getElementById('location');
                locationDiv.innerText = `Przybliżona lokalizacja: ${data.city}, ${data.region}, ${data.country}`;

                const weatherRes = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${data.city}&appid=92f65237b7dcf8bbd9e1027b661d3d37&units=metric`);
                const weatherData = await weatherRes.json();
                const temperature = weatherData.main.temp;
                locationDiv.innerText += ` | Temperatura: ${temperature}°C`;
            } catch (error) {
                console.error('Błąd podczas pobierania lokalizacji lub pogody:', error);
            }
        }

        // Wywołanie funkcji
        fetchLocationAndWeather();
    </script>
</body>
</html>
